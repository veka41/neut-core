import {
- this.text [text, unsafe-get-content-pointer]
- this.unit [unit]
- this.list [list]
- this.file.flag => FF
- this.file.mode => FM
- this.file.descriptor => FD
- this.external => ext
}

// fixme: use the coproduct type to detect errors
define open(path: &text, xs: list(FF.flag), ms: list(FM.mode)): FD.descriptor {
  let path' = this.text.append(path, "\0") in
  let actual-path-string on path' = unsafe-get-content-pointer(path') in
  let fd = ext.open(actual-path-string, FF.interpret(xs), FM.interpret(ms)) in
  let _ = path' in
  fd
}

define close(f: FD.descriptor): unit {
  ext.close(f)
}
