import {
- this.top
}

export {
- malloc
- free
- realloc
- store-i8
- store-i64
}

define malloc(size: i64): i64 {
  introspect target-os {
  - darwin =>
    magic external(malloc, size)
  }
}

define free(ptr: i64): top {
  introspect target-os {
  - darwin =>
    magic external(free, ptr)
  }
}

define realloc(ptr: i64, size: i64): i64 {
  introspect target-os {
  - darwin =>
    magic external(realloc, ptr, size)
  }
}

define store-i64(address: i64, value: i64): top {
  introspect target-os {
  - darwin =>
    magic store(i64, address, value)
  }
}

define store-i8(address: i64, value: i8): top {
  introspect target-os {
  - darwin =>
    magic store(i8, address, value)
  }
}
